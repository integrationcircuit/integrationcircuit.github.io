"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./components/Chat/Chat.tsx":
/*!**********************************!*\
  !*** ./components/Chat/Chat.tsx ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chat: function() { return /* binding */ Chat; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-hot-toast */ \"./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var next_i18next__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-i18next */ \"./node_modules/next-i18next/dist/esm/index.js\");\n/* harmony import */ var _utils_app_conversation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/app/conversation */ \"./utils/app/conversation.ts\");\n/* harmony import */ var _utils_data_throttle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils/data/throttle */ \"./utils/data/throttle.ts\");\n/* harmony import */ var _pages_api_home_home_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/pages/api/home/home.context */ \"./pages/api/home/home.context.tsx\");\n/* harmony import */ var _ChatInput__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ChatInput */ \"./components/Chat/ChatInput.tsx\");\n/* harmony import */ var _ChatLoader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ChatLoader */ \"./components/Chat/ChatLoader.tsx\");\n/* harmony import */ var _MemoizedChatMessage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MemoizedChatMessage */ \"./components/Chat/MemoizedChatMessage.tsx\");\n/* harmony import */ var _Logo__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Logo */ \"./components/Chat/Logo.tsx\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"./node_modules/next/dist/build/polyfills/process.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\nconst Chat = /*#__PURE__*/ _s((0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(_c = _s((param)=>{\n    let { stopConversationRef } = param;\n    var _selectedConversation_messages;\n    _s();\n    const { t } = (0,next_i18next__WEBPACK_IMPORTED_MODULE_3__.useTranslation)(\"chat\");\n    const { state: { selectedConversation, conversations, loading }, handleUpdateConversation, dispatch: homeDispatch } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_pages_api_home_home_context__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n    const [currentMessage, setCurrentMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n    const [autoScrollEnabled, setAutoScrollEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showSettings, setShowSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showScrollDownButton, setShowScrollDownButton] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isTyping, setIsTyping] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [animatedMessage, setAnimatedMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [showLogo, setShowLogo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const lastScrollY = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const textareaRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const handleSend = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async function(message) {\n        let deleteCount = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, plugin = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null;\n        if (selectedConversation) {\n            let updatedConversation;\n            if (deleteCount) {\n                const updatedMessages = [\n                    ...selectedConversation.messages\n                ];\n                for(let i = 0; i < deleteCount; i++){\n                    updatedMessages.pop();\n                }\n                updatedConversation = {\n                    ...selectedConversation,\n                    messages: [\n                        ...updatedMessages,\n                        message\n                    ]\n                };\n            } else {\n                updatedConversation = {\n                    ...selectedConversation,\n                    messages: [\n                        ...selectedConversation.messages,\n                        message\n                    ]\n                };\n            }\n            homeDispatch({\n                field: \"selectedConversation\",\n                value: updatedConversation\n            });\n            homeDispatch({\n                field: \"loading\",\n                value: true\n            });\n            homeDispatch({\n                field: \"messageIsStreaming\",\n                value: true\n            });\n            const chatBody = {\n                messages: updatedConversation.messages\n            };\n            var _localStorage_getItem;\n            //const endpoint = process.env.NEXT_PUBLIC_API_ENDPOINT;\n            //const bearerToken = process.env.NEXT_PUBLIC_BEARER_TOKEN;\n            //const endpoint = 'https://snapgpt.labs.snaplogicdev.com/api/1/rest/slsched/feed/snaplogic/se-demo/shared/hr_demo_se_team_task';\n            //const bearerToken = 'OiEVMJqdIJJJeD2wmlzGdAFuOlW92N7R';\n            let endpoint = (_localStorage_getItem = localStorage.getItem(\"userUri\")) !== null && _localStorage_getItem !== void 0 ? _localStorage_getItem : \"\";\n            var _localStorage_getItem1;\n            let bearerToken = (_localStorage_getItem1 = localStorage.getItem(\"userToken\")) !== null && _localStorage_getItem1 !== void 0 ? _localStorage_getItem1 : \"\";\n            console.log(\"endpoint: \", endpoint);\n            console.log(\"bearerToken: \", bearerToken);\n            console.log(\"process.env.NEXT_PUBLIC_API_ENDPOINT\", process.env.NEXT_PUBLIC_API_ENDPOINT);\n            console.log(\"process.env.NEXT_PUBLIC_BEARER_TOKEN\", process.env.NEXT_PUBLIC_BEARER_TOKEN);\n            if (typeof endpoint === \"undefined\" || typeof bearerToken === \"undefined\") {\n                throw new Error(\"NEXT_PUBLIC_API_ENDPOINT or NEXT_PUBLIC_BEARER_TOKEN is not defined\");\n            }\n            let body;\n            const jsonRequest = {\n                \"source\": null,\n                \"prompt\": message[\"content\"]\n            };\n            const controller = new AbortController();\n            console.log(\"jsonContent\", jsonRequest);\n            body = JSON.stringify(jsonRequest);\n            const response = await fetch(endpoint, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": \"Bearer \".concat(bearerToken)\n                },\n                signal: controller.signal,\n                body\n            });\n            if (!response.ok) {\n                console.log(\"nonono !response.ok\");\n                homeDispatch({\n                    field: \"loading\",\n                    value: false\n                });\n                homeDispatch({\n                    field: \"messageIsStreaming\",\n                    value: false\n                });\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error(response.statusText);\n                return;\n            }\n            const data = response.body;\n            if (!data) {\n                homeDispatch({\n                    field: \"loading\",\n                    value: false\n                });\n                homeDispatch({\n                    field: \"messageIsStreaming\",\n                    value: false\n                });\n                return;\n            } else {\n                var _baseAnswer_choices_;\n                const jsonResponse = await response.json();\n                console.log(\"jsonResponse\", jsonResponse);\n                /*For old llm snaps, please use this line */ // let answer: string = jsonResponse[0].choices[0].content as string; \n                /*For new llm snappakcs, please use this line */ console.log(jsonResponse[0]);\n                // STAN\n                // let answer: string = jsonResponse[0].choices[0].message.content as string;\n                // ROGER\n                let answer = jsonResponse[0].completion;\n                //let answer: string = jsonResponse[0];\n                // START STAN\n                let baseAnswer = jsonResponse[0];\n                let finalAnswer = \"\";\n                if (baseAnswer.choices && ((_baseAnswer_choices_ = baseAnswer.choices[0]) === null || _baseAnswer_choices_ === void 0 ? void 0 : _baseAnswer_choices_.content)) {\n                    debugger;\n                    finalAnswer = baseAnswer.choices[0].content;\n                } else if (baseAnswer.completion) {\n                    debugger;\n                    finalAnswer = baseAnswer.completion;\n                } else {\n                    debugger;\n                    finalAnswer = baseAnswer;\n                }\n                answer = finalAnswer;\n                console.log(\"stan test\");\n                console.log(answer);\n                alert(answer);\n                // END STAN\n                console.log(\"LLM snap answer: \", answer);\n                // **************Redline*****************\n                // render answer with Red Line use case\n                if (answer !== null && answer.includes(\"[Red Line]\")) {\n                    // Disable potential HTML tags from original answer to avoid XSS Attack\n                    answer.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n                    // Split the answer into sentences\n                    const sentences = answer.split(RegExp(\"(?<!\\\\s\\\\.)([.!?])\"));\n                    // Identify sentences after [Red Line] and wrap them in a span with a red underline\n                    answer = sentences.map((sentence)=>{\n                        console.log(\"sentence: \", sentence);\n                        if (sentence.includes(\"[Red Line]\")) {\n                            const [, restOfSentence] = sentence.split(\"[Red Line]\");\n                            return ' <span style=\"border-bottom: 2px solid red;\">'.concat(restOfSentence.trim(), \"</span>\");\n                        } else {\n                            return sentence;\n                        }\n                    }).join(\"\");\n                    console.log(\"Rendered HTML result with red line: \", answer);\n                }\n                // **************Redline*****************\n                const updatedMessages = [\n                    ...updatedConversation.messages,\n                    {\n                        role: \"assistant\",\n                        content: answer\n                    }\n                ];\n                updatedConversation = {\n                    ...updatedConversation,\n                    messages: updatedMessages\n                };\n                homeDispatch({\n                    field: \"selectedConversation\",\n                    value: updatedConversation\n                });\n                (0,_utils_app_conversation__WEBPACK_IMPORTED_MODULE_4__.saveConversation)(updatedConversation);\n                const updatedConversations = conversations.map((conversation)=>{\n                    if (conversation.id === selectedConversation.id) {\n                        return updatedConversation;\n                    }\n                    return conversation;\n                });\n                if (updatedConversations.length === 0) {\n                    updatedConversations.push(updatedConversation);\n                }\n                homeDispatch({\n                    field: \"conversations\",\n                    value: updatedConversations\n                });\n                (0,_utils_app_conversation__WEBPACK_IMPORTED_MODULE_4__.saveConversations)(updatedConversations);\n                homeDispatch({\n                    field: \"loading\",\n                    value: false\n                });\n                homeDispatch({\n                    field: \"messageIsStreaming\",\n                    value: false\n                });\n            }\n        }\n    }, [\n        conversations,\n        selectedConversation,\n        stopConversationRef\n    ]);\n    const handleScroll = ()=>{\n        if (chatContainerRef.current) {\n            const { scrollTop, scrollHeight, clientHeight } = chatContainerRef.current;\n            const bottomTolerance = 30;\n            if (scrollTop + clientHeight < scrollHeight - bottomTolerance) {\n                setAutoScrollEnabled(false);\n                setShowScrollDownButton(true);\n            } else {\n                setAutoScrollEnabled(true);\n                setShowScrollDownButton(false);\n            }\n        }\n    };\n    const handleScrollDown = ()=>{\n        var _chatContainerRef_current;\n        (_chatContainerRef_current = chatContainerRef.current) === null || _chatContainerRef_current === void 0 ? void 0 : _chatContainerRef_current.scrollTo({\n            top: chatContainerRef.current.scrollHeight,\n            behavior: \"smooth\"\n        });\n    };\n    const handleSettings = ()=>{\n        setShowSettings(!showSettings);\n    };\n    const scrollDown = ()=>{\n        if (autoScrollEnabled) {\n            var _messagesEndRef_current;\n            (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView(true);\n        }\n    };\n    const throttledScrollDown = (0,_utils_data_throttle__WEBPACK_IMPORTED_MODULE_5__.throttle)(scrollDown, 250);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        throttledScrollDown();\n        selectedConversation && selectedConversation.messages && setCurrentMessage(selectedConversation.messages[selectedConversation.messages.length - 2]);\n    }, [\n        selectedConversation,\n        throttledScrollDown\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const observer = new IntersectionObserver((param)=>{\n            let [entry] = param;\n            setAutoScrollEnabled(entry.isIntersecting);\n            if (entry.isIntersecting) {\n                var _textareaRef_current;\n                (_textareaRef_current = textareaRef.current) === null || _textareaRef_current === void 0 ? void 0 : _textareaRef_current.focus();\n            }\n        }, {\n            root: null,\n            threshold: 0.5\n        });\n        const messagesEndElement = messagesEndRef.current;\n        if (messagesEndElement) {\n            observer.observe(messagesEndElement);\n        }\n        return ()=>{\n            if (messagesEndElement) {\n                observer.unobserve(messagesEndElement);\n            }\n        };\n    }, [\n        messagesEndRef\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative flex-1 overflow-hidden bg-white dark:bg-[#343d62]\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"max-h-full overflow-x-hidden\",\n                ref: chatContainerRef,\n                onScroll: handleScroll,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Logo__WEBPACK_IMPORTED_MODULE_10__.Logo, {}, void 0, false, {\n                        fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n                        lineNumber: 307,\n                        columnNumber: 9\n                    }, undefined),\n                    selectedConversation === null || selectedConversation === void 0 ? void 0 : (_selectedConversation_messages = selectedConversation.messages) === null || _selectedConversation_messages === void 0 ? void 0 : _selectedConversation_messages.map((message, index)=>{\n                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MemoizedChatMessage__WEBPACK_IMPORTED_MODULE_9__.MemoizedChatMessage, {\n                            message: message,\n                            messageIndex: index\n                        }, index, false, {\n                            fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n                            lineNumber: 310,\n                            columnNumber: 13\n                        }, undefined);\n                    }),\n                    loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatLoader__WEBPACK_IMPORTED_MODULE_8__.ChatLoader, {}, void 0, false, {\n                        fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n                        lineNumber: 317,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"h-[162px] bg-white dark:bg-[#343d62]\",\n                        ref: messagesEndRef\n                    }, void 0, false, {\n                        fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n                        lineNumber: 319,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n                lineNumber: 302,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatInput__WEBPACK_IMPORTED_MODULE_7__.ChatInput, {\n                stopConversationRef: stopConversationRef,\n                textareaRef: textareaRef,\n                onSend: (message, plugin)=>{\n                    setCurrentMessage(message);\n                    handleSend(message, 0, plugin);\n                },\n                onScrollDownClick: handleScrollDown,\n                onRegenerate: ()=>{\n                    if (currentMessage) {\n                        handleSend(currentMessage, 2, null);\n                    }\n                },\n                showScrollDownButton: showScrollDownButton\n            }, void 0, false, {\n                fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n                lineNumber: 325,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/stan/Projects/integrationcircuit.github.io/components/Chat/Chat.tsx\",\n        lineNumber: 301,\n        columnNumber: 5\n    }, undefined);\n}, \"1irGp3IXnApxqYGaOjvH2vBDmz8=\", false, function() {\n    return [\n        next_i18next__WEBPACK_IMPORTED_MODULE_3__.useTranslation\n    ];\n})), \"1irGp3IXnApxqYGaOjvH2vBDmz8=\", false, function() {\n    return [\n        next_i18next__WEBPACK_IMPORTED_MODULE_3__.useTranslation\n    ];\n});\n_c1 = Chat;\nChat.displayName = \"Chat\";\nvar _c, _c1;\n$RefreshReg$(_c, \"Chat$memo\");\n$RefreshReg$(_c1, \"Chat\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgTXV0YWJsZVJlZk9iamVjdCxcbiAgbWVtbyxcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUNvbnRleHQsXG4gIHVzZUVmZmVjdCxcbiAgdXNlUmVmLFxuICB1c2VTdGF0ZSxcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHRvYXN0IGZyb20gJ3JlYWN0LWhvdC10b2FzdCc7XG5cbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAnbmV4dC1pMThuZXh0JztcblxuaW1wb3J0IHtcbiAgc2F2ZUNvbnZlcnNhdGlvbixcbiAgc2F2ZUNvbnZlcnNhdGlvbnMsXG59IGZyb20gJ0AvdXRpbHMvYXBwL2NvbnZlcnNhdGlvbic7XG5pbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gJ0AvdXRpbHMvZGF0YS90aHJvdHRsZSc7XG5cbmltcG9ydCB7IENoYXRCb2R5LCBDb252ZXJzYXRpb24sIE1lc3NhZ2UgfSBmcm9tICdAL3R5cGVzL2NoYXQnO1xuXG5pbXBvcnQgSG9tZUNvbnRleHQgZnJvbSAnQC9wYWdlcy9hcGkvaG9tZS9ob21lLmNvbnRleHQnO1xuXG5pbXBvcnQgeyBDaGF0SW5wdXQgfSBmcm9tICcuL0NoYXRJbnB1dCc7XG5pbXBvcnQgeyBDaGF0TG9hZGVyIH0gZnJvbSAnLi9DaGF0TG9hZGVyJztcbmltcG9ydCB7IE1lbW9pemVkQ2hhdE1lc3NhZ2UgfSBmcm9tICcuL01lbW9pemVkQ2hhdE1lc3NhZ2UnO1xuaW1wb3J0IHsgTG9nbyB9IGZyb20gJy4vTG9nbyc7XG5pbXBvcnQgeyBqc29uIH0gZnJvbSAnc3RyZWFtL2NvbnN1bWVycyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHN0b3BDb252ZXJzYXRpb25SZWY6IE11dGFibGVSZWZPYmplY3Q8Ym9vbGVhbj47XG59XG5cbmV4cG9ydCBjb25zdCBDaGF0ID0gbWVtbygoeyBzdG9wQ29udmVyc2F0aW9uUmVmIH06IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oJ2NoYXQnKTtcblxuICBjb25zdCB7XG4gICAgc3RhdGU6IHtcbiAgICAgIHNlbGVjdGVkQ29udmVyc2F0aW9uLFxuICAgICAgY29udmVyc2F0aW9ucyxcbiAgICAgIGxvYWRpbmcsXG4gICAgfSxcbiAgICBoYW5kbGVVcGRhdGVDb252ZXJzYXRpb24sXG4gICAgZGlzcGF0Y2g6IGhvbWVEaXNwYXRjaCxcbiAgfSA9IHVzZUNvbnRleHQoSG9tZUNvbnRleHQpO1xuXG4gIGNvbnN0IFtjdXJyZW50TWVzc2FnZSwgc2V0Q3VycmVudE1lc3NhZ2VdID0gdXNlU3RhdGU8TWVzc2FnZT4oKTtcbiAgY29uc3QgW2F1dG9TY3JvbGxFbmFibGVkLCBzZXRBdXRvU2Nyb2xsRW5hYmxlZF0gPSB1c2VTdGF0ZTxib29sZWFuPih0cnVlKTtcbiAgY29uc3QgW3Nob3dTZXR0aW5ncywgc2V0U2hvd1NldHRpbmdzXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW3Nob3dTY3JvbGxEb3duQnV0dG9uLCBzZXRTaG93U2Nyb2xsRG93bkJ1dHRvbl0gPVxuICAgIHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW2lzVHlwaW5nLCBzZXRJc1R5cGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthbmltYXRlZE1lc3NhZ2UsIHNldEFuaW1hdGVkTWVzc2FnZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtzaG93TG9nbywgc2V0U2hvd0xvZ29dID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgY29uc3QgbGFzdFNjcm9sbFkgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgY2hhdENvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KG51bGwpO1xuXG4gIGNvbnN0IGhhbmRsZVNlbmQgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAobWVzc2FnZTogTWVzc2FnZSwgZGVsZXRlQ291bnQgPSAwLCBwbHVnaW46IFBsdWdpbiB8IG51bGwgPSBudWxsKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0ZWRDb252ZXJzYXRpb24pIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRDb252ZXJzYXRpb246IENvbnZlcnNhdGlvbjtcbiAgICAgICAgaWYgKGRlbGV0ZUNvdW50KSB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZE1lc3NhZ2VzID0gWy4uLnNlbGVjdGVkQ29udmVyc2F0aW9uLm1lc3NhZ2VzXTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlbGV0ZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIHVwZGF0ZWRNZXNzYWdlcy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlZENvbnZlcnNhdGlvbiA9IHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGVkQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgbWVzc2FnZXM6IFsuLi51cGRhdGVkTWVzc2FnZXMsIG1lc3NhZ2VdLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlZENvbnZlcnNhdGlvbiA9IHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGVkQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgbWVzc2FnZXM6IFsuLi5zZWxlY3RlZENvbnZlcnNhdGlvbi5tZXNzYWdlcywgbWVzc2FnZV0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBob21lRGlzcGF0Y2goe1xuICAgICAgICAgIGZpZWxkOiAnc2VsZWN0ZWRDb252ZXJzYXRpb24nLFxuICAgICAgICAgIHZhbHVlOiB1cGRhdGVkQ29udmVyc2F0aW9uLFxuICAgICAgICB9KTtcbiAgICAgICAgaG9tZURpc3BhdGNoKHsgZmllbGQ6ICdsb2FkaW5nJywgdmFsdWU6IHRydWUgfSk7XG4gICAgICAgIGhvbWVEaXNwYXRjaCh7IGZpZWxkOiAnbWVzc2FnZUlzU3RyZWFtaW5nJywgdmFsdWU6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNoYXRCb2R5OiBDaGF0Qm9keSA9IHtcbiAgICAgICAgICBtZXNzYWdlczogdXBkYXRlZENvbnZlcnNhdGlvbi5tZXNzYWdlcyxcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vY29uc3QgZW5kcG9pbnQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfRU5EUE9JTlQ7XG4gICAgICAgIC8vY29uc3QgYmVhcmVyVG9rZW4gPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CRUFSRVJfVE9LRU47XG4gICAgICAgIC8vY29uc3QgZW5kcG9pbnQgPSAnaHR0cHM6Ly9zbmFwZ3B0LmxhYnMuc25hcGxvZ2ljZGV2LmNvbS9hcGkvMS9yZXN0L3Nsc2NoZWQvZmVlZC9zbmFwbG9naWMvc2UtZGVtby9zaGFyZWQvaHJfZGVtb19zZV90ZWFtX3Rhc2snO1xuICAgICAgICAvL2NvbnN0IGJlYXJlclRva2VuID0gJ09pRVZNSnFkSUpKSmVEMndtbHpHZEFGdU9sVzkyTjdSJztcblxuICAgICAgICBsZXQgZW5kcG9pbnQgOiBzdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclVyaScpID8/IFwiXCI7XG4gICAgICAgIGxldCBiZWFyZXJUb2tlbiA6IHN0cmluZyAgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclRva2VuJykgPz8gXCJcIjtcblxuICAgICAgICBjb25zb2xlLmxvZygnZW5kcG9pbnQ6ICcsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc29sZS5sb2coJ2JlYXJlclRva2VuOiAnLCBiZWFyZXJUb2tlbik7XG4gICAgICAgIFxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwicHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX0VORFBPSU5UXCIsIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9FTkRQT0lOVCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkVBUkVSX1RPS0VOXCIsIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JFQVJFUl9UT0tFTik7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBlbmRwb2ludCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGJlYXJlclRva2VuID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTkVYVF9QVUJMSUNfQVBJX0VORFBPSU5UIG9yIE5FWFRfUFVCTElDX0JFQVJFUl9UT0tFTiBpcyBub3QgZGVmaW5lZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJvZHk7XG4gICAgICAgIGNvbnN0IGpzb25SZXF1ZXN0ID0geyBcInNvdXJjZVwiOiBudWxsLCBcInByb21wdFwiOiBtZXNzYWdlW1wiY29udGVudFwiXSB9O1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICBjb25zb2xlLmxvZyhcImpzb25Db250ZW50XCIsIGpzb25SZXF1ZXN0KTtcbiAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KGpzb25SZXF1ZXN0KTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50LCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2JlYXJlclRva2VufWBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgYm9keSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vbm9ubyAhcmVzcG9uc2Uub2tcIik7XG4gICAgICAgICAgaG9tZURpc3BhdGNoKHsgZmllbGQ6ICdsb2FkaW5nJywgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgICAgIGhvbWVEaXNwYXRjaCh7IGZpZWxkOiAnbWVzc2FnZUlzU3RyZWFtaW5nJywgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgICAgIHRvYXN0LmVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuYm9keTtcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgaG9tZURpc3BhdGNoKHsgZmllbGQ6ICdsb2FkaW5nJywgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgICAgIGhvbWVEaXNwYXRjaCh7IGZpZWxkOiAnbWVzc2FnZUlzU3RyZWFtaW5nJywgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBqc29uUmVzcG9uc2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJqc29uUmVzcG9uc2VcIiwganNvblJlc3BvbnNlKTtcblxuICAgICAgICAgIC8qRm9yIG9sZCBsbG0gc25hcHMsIHBsZWFzZSB1c2UgdGhpcyBsaW5lICovXG4gICAgICAgICAgLy8gbGV0IGFuc3dlcjogc3RyaW5nID0ganNvblJlc3BvbnNlWzBdLmNob2ljZXNbMF0uY29udGVudCBhcyBzdHJpbmc7IFxuXG4gICAgICAgICAgLypGb3IgbmV3IGxsbSBzbmFwcGFrY3MsIHBsZWFzZSB1c2UgdGhpcyBsaW5lICovXG4gICAgICAgICAgY29uc29sZS5sb2coanNvblJlc3BvbnNlWzBdKTtcbiAgICAgICAgICAvLyBTVEFOXG4gICAgICAgICAvLyBsZXQgYW5zd2VyOiBzdHJpbmcgPSBqc29uUmVzcG9uc2VbMF0uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgYXMgc3RyaW5nO1xuICAgICAgICAgLy8gUk9HRVJcbiAgICAgICAgIGxldCBhbnN3ZXI6IHN0cmluZyA9IGpzb25SZXNwb25zZVswXS5jb21wbGV0aW9uIGFzIHN0cmluZztcbiAgICAgICAgICAvL2xldCBhbnN3ZXI6IHN0cmluZyA9IGpzb25SZXNwb25zZVswXTtcblxuICAgICAgICAgIC8vIFNUQVJUIFNUQU5cbiAgICAgICAgICBsZXQgYmFzZUFuc3dlciA9IGpzb25SZXNwb25zZVswXTtcbiAgICAgICAgICBsZXQgZmluYWxBbnN3ZXI6IHN0cmluZyA9ICcnO1xuICAgICAgICAgIGlmIChiYXNlQW5zd2VyLmNob2ljZXMgJiYgYmFzZUFuc3dlci5jaG9pY2VzWzBdPy5jb250ZW50KSB7XG4gICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICBmaW5hbEFuc3dlciA9IGJhc2VBbnN3ZXIuY2hvaWNlc1swXS5jb250ZW50IGFzIHN0cmluZztcbiAgICAgICAgICB9IGVsc2UgaWYgKGJhc2VBbnN3ZXIuY29tcGxldGlvbikge1xuICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgZmluYWxBbnN3ZXIgPSBiYXNlQW5zd2VyLmNvbXBsZXRpb24gYXMgc3RyaW5nO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICBmaW5hbEFuc3dlciA9IGJhc2VBbnN3ZXIgYXMgc3RyaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhbnN3ZXIgPSBmaW5hbEFuc3dlcjtcbiAgICAgICAgICBjb25zb2xlLmxvZygnc3RhbiB0ZXN0Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coYW5zd2VyKTtcbiAgICAgICAgICBhbGVydChhbnN3ZXIpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVORCBTVEFOXG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkxMTSBzbmFwIGFuc3dlcjogXCIsIGFuc3dlcik7XG5cbiAgICAgICAgICAvLyAqKioqKioqKioqKioqKlJlZGxpbmUqKioqKioqKioqKioqKioqKlxuICAgICAgICAgIC8vIHJlbmRlciBhbnN3ZXIgd2l0aCBSZWQgTGluZSB1c2UgY2FzZVxuICAgICAgICAgIGlmIChhbnN3ZXIgIT09IG51bGwgJiYgYW5zd2VyLmluY2x1ZGVzKFwiW1JlZCBMaW5lXVwiKSkge1xuICAgICAgICAgICAgLy8gRGlzYWJsZSBwb3RlbnRpYWwgSFRNTCB0YWdzIGZyb20gb3JpZ2luYWwgYW5zd2VyIHRvIGF2b2lkIFhTUyBBdHRhY2tcbiAgICAgICAgICAgIGFuc3dlci5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuICAgICAgICAgICAgLy8gU3BsaXQgdGhlIGFuc3dlciBpbnRvIHNlbnRlbmNlc1xuICAgICAgICAgICAgY29uc3Qgc2VudGVuY2VzID0gYW5zd2VyLnNwbGl0KC8oPzwhXFxzXFwuKShbLiE/XSkvKTtcbiAgICAgICAgICAgIC8vIElkZW50aWZ5IHNlbnRlbmNlcyBhZnRlciBbUmVkIExpbmVdIGFuZCB3cmFwIHRoZW0gaW4gYSBzcGFuIHdpdGggYSByZWQgdW5kZXJsaW5lXG4gICAgICAgICAgICBhbnN3ZXIgPSBzZW50ZW5jZXNcbiAgICAgICAgICAgICAgLm1hcCgoc2VudGVuY2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNlbnRlbmNlOiBcIiwgc2VudGVuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChzZW50ZW5jZS5pbmNsdWRlcygnW1JlZCBMaW5lXScpKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBbLCByZXN0T2ZTZW50ZW5jZV0gPSBzZW50ZW5jZS5zcGxpdCgnW1JlZCBMaW5lXScpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGAgPHNwYW4gc3R5bGU9XCJib3JkZXItYm90dG9tOiAycHggc29saWQgcmVkO1wiPiR7cmVzdE9mU2VudGVuY2UudHJpbSgpfTwvc3Bhbj5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gc2VudGVuY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuam9pbignJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbmRlcmVkIEhUTUwgcmVzdWx0IHdpdGggcmVkIGxpbmU6IFwiLCBhbnN3ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyAqKioqKioqKioqKioqKlJlZGxpbmUqKioqKioqKioqKioqKioqKlxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlczogTWVzc2FnZVtdID0gW1xuICAgICAgICAgICAgLi4udXBkYXRlZENvbnZlcnNhdGlvbi5tZXNzYWdlcyxcbiAgICAgICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IGFuc3dlciB9LFxuICAgICAgICAgIF07XG4gICAgICAgICAgdXBkYXRlZENvbnZlcnNhdGlvbiA9IHtcbiAgICAgICAgICAgIC4uLnVwZGF0ZWRDb252ZXJzYXRpb24sXG4gICAgICAgICAgICBtZXNzYWdlczogdXBkYXRlZE1lc3NhZ2VzLFxuICAgICAgICAgIH07XG4gICAgICAgICAgaG9tZURpc3BhdGNoKHtcbiAgICAgICAgICAgIGZpZWxkOiAnc2VsZWN0ZWRDb252ZXJzYXRpb24nLFxuICAgICAgICAgICAgdmFsdWU6IHVwZGF0ZWRDb252ZXJzYXRpb24sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2F2ZUNvbnZlcnNhdGlvbih1cGRhdGVkQ29udmVyc2F0aW9uKTtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9uczogQ29udmVyc2F0aW9uW10gPSBjb252ZXJzYXRpb25zLm1hcChcbiAgICAgICAgICAgIChjb252ZXJzYXRpb24pID0+IHtcbiAgICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbi5pZCA9PT0gc2VsZWN0ZWRDb252ZXJzYXRpb24uaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZENvbnZlcnNhdGlvbjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gY29udmVyc2F0aW9uO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICh1cGRhdGVkQ29udmVyc2F0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHVwZGF0ZWRDb252ZXJzYXRpb25zLnB1c2godXBkYXRlZENvbnZlcnNhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhvbWVEaXNwYXRjaCh7IGZpZWxkOiAnY29udmVyc2F0aW9ucycsIHZhbHVlOiB1cGRhdGVkQ29udmVyc2F0aW9ucyB9KTtcbiAgICAgICAgICBzYXZlQ29udmVyc2F0aW9ucyh1cGRhdGVkQ29udmVyc2F0aW9ucyk7XG4gICAgICAgICAgaG9tZURpc3BhdGNoKHsgZmllbGQ6ICdsb2FkaW5nJywgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgICAgIGhvbWVEaXNwYXRjaCh7IGZpZWxkOiAnbWVzc2FnZUlzU3RyZWFtaW5nJywgdmFsdWU6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbXG4gICAgICBjb252ZXJzYXRpb25zLFxuICAgICAgc2VsZWN0ZWRDb252ZXJzYXRpb24sXG4gICAgICBzdG9wQ29udmVyc2F0aW9uUmVmLFxuICAgIF0sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU2Nyb2xsID0gKCkgPT4ge1xuICAgIGlmIChjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHsgc2Nyb2xsVG9wLCBzY3JvbGxIZWlnaHQsIGNsaWVudEhlaWdodCB9ID1cbiAgICAgICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgYm90dG9tVG9sZXJhbmNlID0gMzA7XG5cbiAgICAgIGlmIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQgPCBzY3JvbGxIZWlnaHQgLSBib3R0b21Ub2xlcmFuY2UpIHtcbiAgICAgICAgc2V0QXV0b1Njcm9sbEVuYWJsZWQoZmFsc2UpO1xuICAgICAgICBzZXRTaG93U2Nyb2xsRG93bkJ1dHRvbih0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEF1dG9TY3JvbGxFbmFibGVkKHRydWUpO1xuICAgICAgICBzZXRTaG93U2Nyb2xsRG93bkJ1dHRvbihmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNjcm9sbERvd24gPSAoKSA9PiB7XG4gICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50Py5zY3JvbGxUbyh7XG4gICAgICB0b3A6IGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQsXG4gICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2V0dGluZ3MgPSAoKSA9PiB7XG4gICAgc2V0U2hvd1NldHRpbmdzKCFzaG93U2V0dGluZ3MpO1xuICB9O1xuXG4gIGNvbnN0IHNjcm9sbERvd24gPSAoKSA9PiB7XG4gICAgaWYgKGF1dG9TY3JvbGxFbmFibGVkKSB7XG4gICAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh0cnVlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHRocm90dGxlZFNjcm9sbERvd24gPSB0aHJvdHRsZShzY3JvbGxEb3duLCAyNTApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdGhyb3R0bGVkU2Nyb2xsRG93bigpO1xuICAgIHNlbGVjdGVkQ29udmVyc2F0aW9uICYmIHNlbGVjdGVkQ29udmVyc2F0aW9uLm1lc3NhZ2VzICYmXG4gICAgICBzZXRDdXJyZW50TWVzc2FnZShcbiAgICAgICAgc2VsZWN0ZWRDb252ZXJzYXRpb24ubWVzc2FnZXNbc2VsZWN0ZWRDb252ZXJzYXRpb24ubWVzc2FnZXMubGVuZ3RoIC0gMl0sXG4gICAgICApO1xuICB9LCBbc2VsZWN0ZWRDb252ZXJzYXRpb24sIHRocm90dGxlZFNjcm9sbERvd25dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKFtlbnRyeV0pID0+IHtcbiAgICAgICAgc2V0QXV0b1Njcm9sbEVuYWJsZWQoZW50cnkuaXNJbnRlcnNlY3RpbmcpO1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICB0ZXh0YXJlYVJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb290OiBudWxsLFxuICAgICAgICB0aHJlc2hvbGQ6IDAuNSxcbiAgICAgIH0sXG4gICAgKTtcbiAgICBjb25zdCBtZXNzYWdlc0VuZEVsZW1lbnQgPSBtZXNzYWdlc0VuZFJlZi5jdXJyZW50O1xuICAgIGlmIChtZXNzYWdlc0VuZEVsZW1lbnQpIHtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUobWVzc2FnZXNFbmRFbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChtZXNzYWdlc0VuZEVsZW1lbnQpIHtcbiAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKG1lc3NhZ2VzRW5kRWxlbWVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW21lc3NhZ2VzRW5kUmVmXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXgtMSBvdmVyZmxvdy1oaWRkZW4gYmctd2hpdGUgZGFyazpiZy1bIzM0M2Q2Ml1cIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPVwibWF4LWgtZnVsbCBvdmVyZmxvdy14LWhpZGRlblwiXG4gICAgICAgIHJlZj17Y2hhdENvbnRhaW5lclJlZn1cbiAgICAgICAgb25TY3JvbGw9e2hhbmRsZVNjcm9sbH1cbiAgICAgID5cbiAgICAgICAgPExvZ28gLz5cbiAgICAgICAge3NlbGVjdGVkQ29udmVyc2F0aW9uPy5tZXNzYWdlcz8ubWFwKChtZXNzYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TWVtb2l6ZWRDaGF0TWVzc2FnZVxuICAgICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICBtZXNzYWdlPXttZXNzYWdlfVxuICAgICAgICAgICAgICBtZXNzYWdlSW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgLz4pO1xuICAgICAgICB9KX1cblxuICAgICAgICB7bG9hZGluZyAmJiA8Q2hhdExvYWRlciAvPn1cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwiaC1bMTYycHhdIGJnLXdoaXRlIGRhcms6YmctWyMzNDNkNjJdXCJcbiAgICAgICAgICByZWY9e21lc3NhZ2VzRW5kUmVmfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxDaGF0SW5wdXRcbiAgICAgICAgc3RvcENvbnZlcnNhdGlvblJlZj17c3RvcENvbnZlcnNhdGlvblJlZn1cbiAgICAgICAgdGV4dGFyZWFSZWY9e3RleHRhcmVhUmVmfVxuICAgICAgICBvblNlbmQ9eyhtZXNzYWdlLCBwbHVnaW4pID0+IHtcbiAgICAgICAgICBzZXRDdXJyZW50TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICBoYW5kbGVTZW5kKG1lc3NhZ2UsIDAsIHBsdWdpbik7XG4gICAgICAgIH19XG4gICAgICAgIG9uU2Nyb2xsRG93bkNsaWNrPXtoYW5kbGVTY3JvbGxEb3dufVxuICAgICAgICBvblJlZ2VuZXJhdGU9eygpID0+IHtcbiAgICAgICAgICBpZiAoY3VycmVudE1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGhhbmRsZVNlbmQoY3VycmVudE1lc3NhZ2UsIDIsIG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgICAgc2hvd1Njcm9sbERvd25CdXR0b249e3Nob3dTY3JvbGxEb3duQnV0dG9ufVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn0pO1xuQ2hhdC5kaXNwbGF5TmFtZSA9ICdDaGF0JztcbiJdLCJuYW1lcyI6WyJtZW1vIiwidXNlQ2FsbGJhY2siLCJ1c2VDb250ZXh0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ0b2FzdCIsInVzZVRyYW5zbGF0aW9uIiwic2F2ZUNvbnZlcnNhdGlvbiIsInNhdmVDb252ZXJzYXRpb25zIiwidGhyb3R0bGUiLCJIb21lQ29udGV4dCIsIkNoYXRJbnB1dCIsIkNoYXRMb2FkZXIiLCJNZW1vaXplZENoYXRNZXNzYWdlIiwiTG9nbyIsIkNoYXQiLCJzdG9wQ29udmVyc2F0aW9uUmVmIiwic2VsZWN0ZWRDb252ZXJzYXRpb24iLCJ0Iiwic3RhdGUiLCJjb252ZXJzYXRpb25zIiwibG9hZGluZyIsImhhbmRsZVVwZGF0ZUNvbnZlcnNhdGlvbiIsImRpc3BhdGNoIiwiaG9tZURpc3BhdGNoIiwiY3VycmVudE1lc3NhZ2UiLCJzZXRDdXJyZW50TWVzc2FnZSIsImF1dG9TY3JvbGxFbmFibGVkIiwic2V0QXV0b1Njcm9sbEVuYWJsZWQiLCJzaG93U2V0dGluZ3MiLCJzZXRTaG93U2V0dGluZ3MiLCJzaG93U2Nyb2xsRG93bkJ1dHRvbiIsInNldFNob3dTY3JvbGxEb3duQnV0dG9uIiwiaXNUeXBpbmciLCJzZXRJc1R5cGluZyIsImFuaW1hdGVkTWVzc2FnZSIsInNldEFuaW1hdGVkTWVzc2FnZSIsInNob3dMb2dvIiwic2V0U2hvd0xvZ28iLCJsYXN0U2Nyb2xsWSIsIm1lc3NhZ2VzRW5kUmVmIiwiY2hhdENvbnRhaW5lclJlZiIsInRleHRhcmVhUmVmIiwiaGFuZGxlU2VuZCIsIm1lc3NhZ2UiLCJkZWxldGVDb3VudCIsInBsdWdpbiIsInVwZGF0ZWRDb252ZXJzYXRpb24iLCJ1cGRhdGVkTWVzc2FnZXMiLCJtZXNzYWdlcyIsImkiLCJwb3AiLCJmaWVsZCIsInZhbHVlIiwiY2hhdEJvZHkiLCJsb2NhbFN0b3JhZ2UiLCJlbmRwb2ludCIsImdldEl0ZW0iLCJiZWFyZXJUb2tlbiIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX0VORFBPSU5UIiwiTkVYVF9QVUJMSUNfQkVBUkVSX1RPS0VOIiwiRXJyb3IiLCJib2R5IiwianNvblJlcXVlc3QiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwic2lnbmFsIiwib2siLCJlcnJvciIsInN0YXR1c1RleHQiLCJkYXRhIiwiYmFzZUFuc3dlciIsImpzb25SZXNwb25zZSIsImpzb24iLCJhbnN3ZXIiLCJjb21wbGV0aW9uIiwiZmluYWxBbnN3ZXIiLCJjaG9pY2VzIiwiY29udGVudCIsImFsZXJ0IiwiaW5jbHVkZXMiLCJyZXBsYWNlIiwic2VudGVuY2VzIiwic3BsaXQiLCJtYXAiLCJzZW50ZW5jZSIsInJlc3RPZlNlbnRlbmNlIiwidHJpbSIsImpvaW4iLCJyb2xlIiwidXBkYXRlZENvbnZlcnNhdGlvbnMiLCJjb252ZXJzYXRpb24iLCJpZCIsImxlbmd0aCIsInB1c2giLCJoYW5kbGVTY3JvbGwiLCJjdXJyZW50Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiYm90dG9tVG9sZXJhbmNlIiwiaGFuZGxlU2Nyb2xsRG93biIsInNjcm9sbFRvIiwidG9wIiwiYmVoYXZpb3IiLCJoYW5kbGVTZXR0aW5ncyIsInNjcm9sbERvd24iLCJzY3JvbGxJbnRvVmlldyIsInRocm90dGxlZFNjcm9sbERvd24iLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsImZvY3VzIiwicm9vdCIsInRocmVzaG9sZCIsIm1lc3NhZ2VzRW5kRWxlbWVudCIsIm9ic2VydmUiLCJ1bm9ic2VydmUiLCJkaXYiLCJjbGFzc05hbWUiLCJyZWYiLCJvblNjcm9sbCIsImluZGV4IiwibWVzc2FnZUluZGV4Iiwib25TZW5kIiwib25TY3JvbGxEb3duQ2xpY2siLCJvblJlZ2VuZXJhdGUiLCJkaXNwbGF5TmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Chat/Chat.tsx\n"));

/***/ })

});